const EthereumTx = require('ethereumjs-tx');
const { web3 } = require('web3');
const { getTransactionCount, sendRawTransaction } = require('./rpc');
const { toBN, toWei, padLeft, toHex } = require('web3-utils');
const { randomInt } = require('crypto');

const account = '0xf59c11945ca9d2a913b8a89be58fa51ac2db090d'
const privateKey = Buffer.from('748cf39d829ce27ffe5eca4aa7525aa65dc31c59791d76d22d24339cf1104a15', 'hex')
const toAddresses = ["0xf046EAA5737816deCe517c5Aa18d635997C2F1A0",
"0x6e21d7CDd143219EFFecF2A42C799017cc605956",
"0x4275a6Bc1D3645467F31669867cE1D48fA6CbCCb",
"0xd2aD1A324074C2760A2c014602A2bfaF4c434C1a",
"0x5b2d9645D929bf33324c5294AE0ae48698E03Ad1",
"0xADaC0E31E51A1E55966862634880b230EF622023",
"0xbcfA95e17f74BF06D62C6256D3bCEDcC328c5f68",
"0x0DBC3E3fa334C272202399f0822398d051e0a083",
"0xA6E4F5B2Fe47bD49093e7F6809f78FB7d5c8660F",
"0xd748BE979de104154bEc9D037A2e00A4248fc852",
"0x336da063961a11347eDfdCe03A5082AEdB8Cc537",
"0x367ab642521C42fDFAB9BCc4677005d1C0C3b47D",
"0x8Ca5270F198be5edD94AA657f2422FEC490b03d8",
"0x748ad9c94f71f0C91da3fe2017BC51CA16B3c8A7",
"0x5b9B65470bffC3728694b9c62abefCccdE7bFcd2",
"0x77101c92ECB31f509db1D1Ba8aD4E742Bb1Bef6B",
"0x66ac631Fc0DFc51E7f5036D2c6859E7d0f715Cd5",
"0x2a176f49309a00Cc58CB46412908c68566d11a08",
"0x82866b7b93185aF52f310E26679DB81C1401a19B",
"0xf43dc43D382043F57E8a42E685d0805Ab6241ED3",
"0xe65D9f77345Df6589eE557DE16572e6a62b18c9a",
"0xb944027Db7AEC3E9BFF6c88C86b59CA8dDA03d3d",
"0x1Ae83046798E6d9Ae6af37502e500EB7bE4eE20f",
"0xE6D435936e63aB9609B54DbC1552D5529156F6c4",
"0xa3A6929FBfFA44df915B77a604Be6F7b363da513",
"0x284694E7a2eeE0c18dB3A1E286B9Cf22a5e20B50",
"0xBDAFb11B46A1Fe568b6072ec3bf9c4783928903A",
"0x861db986B94516ddE1C5dC497DbAdA7c0b6Dbbb7",
"0xb48b01FCaE9F29E2E737BA941ecDD91C125cbaa5",
"0xb7B22d3FB5283410e16538eca2bDAE1C6Fe8E6A7",
"0x6731b44fD0aa17B0208b025c236C89EEDE63Fbf6",
"0x98D0Ca1cab83E51F1570F82AF323D6dC2D454b5b",
"0xb8f5bA934d9B24B728A5E44F53Cb3fffAdeE266F",
"0x2206e338B12815d1CCCEa8D9F9A387eaAea151b9",
"0xAfA6CA30E97eE96FF4Acae0bc6d6B2d65F8911B0",
"0x4de841b7f577682102e5B930e4f5C80b5257B6c1",
"0x5bFffADAe5De1E988755d5afcf7b0aFc93f0f482",
"0xf4cD1814EcE6279D45E31f307ffaed91B9aA90c3",
"0xFE89d8117d44822E8735D1b03cBD83d7f3d8263D",
"0xB042506Fe746357763f9a4f4bB35f075BB587CB9",
"0x15f00Fdb8b16f80e561132E8B452C1f998dA8FbC",
"0x33d12A0a9A8fA539B132f99aD42AAF89402f0945",
"0x8632DA0418fF9D4C65D2c992678D1b668Fe97999",
"0x70502a917F862fEb8441c9a3750Fa50A73207B0F",
"0x249bC05b3a52Ade02C749Fd420B2DFb127ff2348",
"0x0a5D80fC06d33845483708E15065E41146844c5b",
"0xA4206C5616d43c94A460f85F52D0059A7dE4020A",
"0xeB7eB0e9db4683b26A0BcD4dD75dBfac164c0531",
"0xEf2585413f99a74b8F994Cac4eD881B6d5d96e4D",
"0xE56F6B8F283Ce58f6D922E4A2A3ACF05a2f7B781",
"0xb5bCA8D2C912C31fc8Ee395fdeA5975e06e6ed89",
"0xDef7266A58042ef563C98d1AbfA8B0b4B434F837",
"0x4F02358356eabfeb4B9FB766d1a54807170F29D3",
"0x91CAEe043f6C97a4F5AC6D58CbA32d48c56Bd673",
"0x0F1f0B484FfA70D7e03caE3f9aDd7900100e0A76",
"0xF72798572335327222Ec2a89C001ba916d9E35D1",
"0x557CdeFE656C3643414C0EeBb962b591eEE3F218",
"0x5f535F7D74f7F0eF2ed84587A25BaE4deB298954",
"0x6Ecc9eaE719F7894C97Fec1b7986404041fEda80",
"0x78012Cddd43BB2331c2B3521FA44709eC8c2eB40",
"0xff99011DFd409EC495B965Ee00155E1A752B18DC",
"0x86AD4D5b595ED32145E32aD6fca8E691a37f6C01",
"0x53FD25857562553450eb717798B7c69E2BF895A8",
"0x9b8A7371e45523b6148CB31bEC29b1D8096Bae62",
"0x733e13072c34888e23D5B188e812f5bc54e5dbef",
"0xb4A247D19c33619532843d1749E4E49fE6348422",
"0xA818C1C727016B96BA18E5fc9730D91eda04561B",
"0x2E6b9cCb7C519DA57Af17eEA14a040897FC85226",
"0x99cc43e44Bf4217ee8a199f49CF782CBFd087F86",
"0xa7b8AC9f398758C7F5FBC88a1663b6e6f70Ad644",
"0xdF740b99Bf6c0147Dc844d545E8286f22B6BaF2f",
"0x73cfc11c677A7C380107F0D63Cf1495d716711B1",
"0xe790D36e3aA9a3780ffe2F644a69990214150a07",
"0x5a9520b322aa5B5993Cd106b7DAC37E980ab89f8",
"0xF24f24E7F61749E974Ff9b62ecFD38786FBb75cE",
"0x69901f01e77844D66b98b29221b51A237d16c973",
"0x9AcC857d9186a9e6FA4f144d7bF4a0Ec5e083965",
"0x97F9767c1F603670024c8612F586731d18E746cF",
"0x0E2ab6cc8a38c3e374140F2F20B91f1036212F0c",
"0x7bD36866c456D04335F03DDdFF761C3BB51c192B",
"0x2a14e281C4a0dD66E036B8CEb59EB7bE478E6a2e",
"0xc06b6dB86391F3D107Df17bFE14B87F270723a2f",
"0xA1D762645e008D7d193ba540aA2C5D618c1F595F",
"0x7DbfF7477a75250314e0d272FC97F902E5c92e01",
"0x56A418607e6E3856D0734db93cF270c7E55e5576",
"0x920De99F36828EfF73b46Ca83E55c090D6454fba",
"0x980f28cbdB792E4C519e04043daDF5Bb66B82680",
"0xbe282527D36C6EE7af018D60104f303a3CB989fd",
"0x1946d740B3A44d325183c092F6C81B6727F28150",
"0x725F69A9E2D26c689A3b7BE42a04B230697b0bd4",
"0xec2ad4097998716F862454Ac31F53f47A522335E",
"0xe054751B53fC32f88aFDFE0cdE741A94BEC9e431",
"0x71055D5a41396a5E447B0FF183c4Fb7b50E62b94",
"0x30D66006024B9B6016f6C922094E7EEc10a992C1",
"0xD25efc807749ACFFC058B86ce44E77aEe0cc4E56",
"0x01c34c35b435D962FBfEA0eb7fD5D5fD26B45342",
"0x220e3d63f1F2d18418e3D04AD663026aE396C15f",
"0x322B638Ab49A8521D56702681A085E15199F141a",
"0xB79865DacB139B25F25dcC25C7527b24289EBC48",
"0xeF986adaC54067F08c55FCCc0D9E369E009A7571",
"0x96461dB3785380A09a3020b11ec8c4A435AD4aBd",
"0xbdbB3901656E1f90C6123bf83A7bE0fD08E54f4B",
"0x1e049DB837c1774DF79fd639F1369a5B9DA6341f",
"0x4920DFf7B35049489b443778D9Df0699Bbcfbbf1",
"0x3519D54B7b59079230BD521F2c3e42617c7640F2",
"0xfdAe8817901251d29502a37a1cC29d7A0Dc13afE",
"0x4948E542a65429ed7f911598e48E36a831306f06",
"0xCb06D74C7e5FE388A93A86114191F1C38Fe4C2Ba",
"0x66EeF29E58C42D86aC0D769E542652f0f8FBCFF9",
"0xE83518e268a7Faf8BC9af19f1D262284c5668cb2",
"0x88d3183c2fBF90FFfa5342015983EFb5F0248458",
"0xa94Dd1A1476492B7c09951129634791FF32E2e13",
"0xA93FBd2C21aF0CF9Ba215788D9b96160D2DB1FA2",
"0xed2B689eE4BF468F1FbC6081F857b730b3D79c56",
"0x7E0728887Bf3a16b55985C019e3783D00cb77Eb2",
"0xDA73e65C4fA0Bfd2DA6A54e9b17eC3260018Ef53",
"0xb6915f3dB3f1faa321aBA421645927987B7b544a",
"0x5CfFE53dE155fa5Fb2A52A793147eB66c17F5b56",
"0x5D5F9F0dAE8f601B351272a7765df928898965E9",
"0xB8F1c12de8FC2211e0173B5bFD5cdF46bB6D4d9A",
"0x66a758c175e231258a60F6A4f4BFc460eB2A577A",
"0x51034E3b014dFE5917B6F50CD847FAC245f5c55e",
"0x753BC07D9048F0200416ec18B00C5C3f6413F481",
"0xc41e2a52506dc822c3A55Bc8075b2E83978B8B78",
"0xBdD9dAD3C4415C408467417AAD9d9cf49A0e9bE8",
"0x35980a0BE239695704Ef94E5a82f78F045919682",
"0x1EBf8a246C577DCD36F2f780990384896CdA2598",
"0x22df21BC6c61125b07a0A5D0bF3A180a59C024D5",
"0x427B8705D622fF1022fDe668d464417b2272558E",
"0x05Fea55A19faE980Dc6e14b834b0a40AB682cFcD",
"0x092aC5A4099F9C1943bCd62FD61317D5f2e4B326",
"0x1085b152C9E02eDa783e6a5a61794451a855d263",
"0x7D676a18a54662879Aa19C77b551f8E06bC8F5e8",
"0x5d0580ae1dfb0BBD78b1Fa09A4E7fAB60F3EC967",
"0xc6d3b0D8ca6D48B4bD1F00E41a024A606ca3Ec4A",
"0x6D6855d2712f9eEDDE6bA304b47F2827C464f3A2",
"0xBf9826135274246847F666A25bF3E4a0fA7A663b",
"0xA84e6b159a107D3457d9751066F9277b4b997Eea",
"0xBd829F49Bc9fDbdd6d5fCBEE650882A9f5b15648",
"0x4417f9f8d38c855AD7FCece926D382b4e09ed192",
"0x3a3d4a6A460C60fB0477283F83fE97AD00cC80Aa",
"0x438230585Bd8e5C67e16e1184049bDc31813ad20",
"0xA8C885c8F1D370cd73469509c0657D04fc23b14B",
"0x7dCDEf6549C55414F75a6C29A3b8D38d796063a7",
"0x1b2EBEc3598bee3F91747583968E61B30d25bb93",
"0xf20B390428c720D60bd9D69f6a31082eF662B364",
"0x224ca4553657Bb9B003c3D0B39bb4DCcf3E7695f",
"0x67D55C0227a1439586bf4B66DB4ac899B5428d86",
"0x2f87c7A17EFC3A1225cE6b430643B8662D212d89",
"0x997B63C29c71739B69e95f2248Ff036733dcC67e",
"0x02EEcEab83aB7679c358E735D8AF1eF441FEa811",
"0xD5d0C131272b87d289794e3EB1A21abc796da1Cf",
"0x90B6796113a9b0172849625d748eD6A09c668931",
"0x5F6EB2140ff2Ea61Ce3A5FFCA0E5F47943Ae7B09",
"0x9B3CD04Fae1939aFC455a2cc9CF8a0d0A7184Bc7",
"0x8A8D11530A2985604101092d6749ecc7baBE7f70",
"0xE0F9b15c652649fa630AE15e7404e0376b778FA5",
"0xEA446a5E2666996b6D4065816D97067A6FF58aC7",
"0xd2a40679d3Be35d55beCd197AAF9DEc07De83768",
"0xB97fD5723f5e70ddC2db2e159de8D725B5E0aCe6",
"0x138acA45C67e8b539a4f980CA6f2C2e9E42f6dF7",
"0xDDb17D111CD3cbB3CeDC79518D7413F369Adba36",
"0x4e5339864abaBC8BE31Ad96e6a40410848f5AA1c",
"0x769E88Cb7908df1fE319418D9a86EBBa068dB3A1",
"0xEfD73BF2C38D0a3Ef66982E55F86f7D8f368ffFf",
"0xD6FA5C2F76aC699cA00A6dB3290444D770ac0b7d",
"0x4927acf9e5665a7c2405c436c2b8681b55bC008e",
"0xF3bfd7476C62B003e9d657AB6E45e6dF99eF857B",
"0xe83aD827521CD95FE5155da4141e7274eC4dBbf1",
"0x9d4fc87ad9f51abAA2aD58c9224afe399CaF5ff8",
"0xF4fbB31c0Ef42E9f2F06C664aA3A31f626f7c5Ff",
"0xc4075f2A3815e6cdAeCf0F8763BB821eBEaA895C",
"0x81e048fCB6CA49E1AC63759b2eA206863c2427c3",
"0x9d44d45882Ec8f0621011a0865a5dD29bA5649A2",
"0x9Bb24ADbc37f77C6B5eFDECC2E3da3ebC137adc5",
"0x6936134a83FCB5627AD4C4e225F750bc6c12483b",
"0x9A250B4F267374Ad5A3c8a7F6cc6B58ace0985F5",
"0x2604d52cFcE9271FEAD4C45b166fcA6b9d3677B7",
"0xeFC35c67fA14AB92Bd5a8955Ccbc8cd54E892F31",
"0xa1Aa2c7C7E34254F8a90e2Fd576FE2CfBaFebFa4",
"0xd3875e88BCE3B73d0BDA709C276849147cF4770E",
"0x1Ce16172B3325694B48B9768f25A6200264978b1",
"0x9dbb848EC8ec05e5ee413EFF1Bb686eB37A4BfFe",
"0x62Dfea09e1783E49cB98F1A364Df43f5CC891031",
"0x03ae385d550A549ac11f9CffC8CCBd25884e8bf7",
"0x3BECFD8bdBd55dee73aE191aAEFE031422F33ed5",
"0x4c389758e85D5b7ac383b833febdDF2B65590859",
"0xE9a3231516C0C6aafDa5923b7321a40eE013BFA7",
"0xd744067aF81cb9B8A9ea50fB54244A6919313D3A",
"0x67D3296263b138C6CedccBc7D955A486C3d65217",
"0x1Ad624a7d7B408Fd57Ff3af876B2853e2EDf27F3",
"0x4f22BACb2982c30de6528c42555cD08d2529a277",
"0x8f5F83802EA47063000838b6063E900F92263FBE",
"0xFdeA4BF0056b157C4bcD3aE4E64256A2569EFd1E",
"0xe544DC30b0c02Ad2356DB4EDd5830F749c598897",
"0x4A7Ff93E823350CB66A689d280E8dBb9d2A245a1",
"0xfcd24a3457e54C0800f832F9f2412e41bD414417",
"0x79e990f6e2137DfdD0E45bD2A34Bb088ba2a3449",
"0x8F7150C35E9A8dE9e2CD16c302B083825Cb21ACa",
"0xFcf30AFE23B2b3091DE397dD0d8B239e31d72599"];
const tokenContract = "0xFc614B5d21bAF33DC08b8f41aD320Bc218C67E0B";

(async () => {
  const nonce = await getTransactionCount(account)
  console.log(nonce + 0)
  for (let index = 0; index < toAddresses.length; index++) {
    const to_addr = toAddresses[index];
    const en_to = padLeft(to_addr, 64);
    const en_amount = padLeft(toHex(toWei(toBN(300 + index))), 64)
    
    const txParams = {
      // type: 0,
      from: account,
      nonce: toBN(nonce).add(toBN(index)),
      gasPrice: 5* 10**9,
      gasLimit: toHex(100000), // 21000
      to: tokenContract,
      value: 0,
      data: '0xa9059cbb' + en_to.substring(2) + en_amount.substring(2),
      // EIP 155 chainId - mainnet: 1, ropsten: 3
      chainId: 0x38
    }

    console.log(txParams)
    // return
    const tx = new EthereumTx(txParams)
    const serializedTx = tx.serialize()
    const unsignedRaw = '0x' + serializedTx.toString('hex')
    // console.log(`unsigned: ${unsignedRaw}`)
  
    tx.sign(privateKey)
    const signedRaw = '0x' + tx.serialize().toString('hex')
    console.log(`signed: ${signedRaw}`)
    // broadcast tx 
    await sendRawTransaction(raw = signedRaw)  
  }

})()

// 0xdf80808252089447665be92c18c2580ff7d65601db909a35b4467a80801c8080
// 0xf85f80808252089447665be92c18c2580ff7d65601db909a35b4467a808025a069e2385248d9100c510dff22add02b3d85adf2fc03aaced3280b35abcfa990d6a038b263788b64be6d9928b8c03e032376ba472919b1de9e3ea1513d11ab94e27b